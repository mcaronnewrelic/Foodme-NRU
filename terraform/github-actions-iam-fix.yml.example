# Add this step to your GitHub Actions workflow before terraform apply

- name: Handle existing IAM role conflict
  run: |
    cd terraform
    # Try to import existing role if it exists
    if aws iam get-role --role-name foodme-staging-ec2-role > /dev/null 2>&1; then
      echo "IAM role exists, attempting import..."
      terraform import aws_iam_role.foodme_ec2 foodme-staging-ec2-role || true
    fi
